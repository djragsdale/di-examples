<!DOCTYPE html>
<html lang="en">
  <head>
    <title>DI & IOC in JS</title>
    <script src="assets/js/angularJs/angularJsInjector.js"></script>
    <script src="assets/js/common/Logger.js"></script>
    <script src="assets/js/common/util.js"></script>
    <script src="assets/js/setterPrototype/createInjector.js"></script>
    <script src="assets/js/spring/JsonApplicationContext.js"></script>
    <script src="assets/js/symfony/ContainerBuilder.js"></script>
    <script src="assets/js/symfony/ContainerReference.js"></script>
    <script src="assets/js/symfony/SymfonyContainer.js"></script>
    <style>
      main {
        height: 100vh;
        display: flex;
        flex-direction: column;
      }

      button {

      }

      pre {
        background: gray;
        color: white;

        padding: 16px;
      }

      pre.example {

      }

      pre.log {
        
      }
    </style>
  </head>
  <body>
    <main>
      <h1>Dependency Injection and Inversion of Control in client JavaScript</h1>
      <section>
        <p>
          Developers from different backgrounds may have occasion to write JavaScript, but wish
          to use the same testable structures they are familiar with. While JavaScript has its own
          conventions regarding code style, there are few best practices for using Dependency
          Injection (DI) or Inversion of Control (IOC) containers outside of a front end framework.
          However, due to JavaScript's flexible nature, most DI or IOC patterns from other
          languages can be adapted to JS.
        </p>
      </section>
      <section>
        <h2>Spring</h2>
        <p>Using beans is a common practice in Java programming. Developers with a Spring
          background might prefer this type of central configuration of dependencies. Also included
          in this configuration is an example of the Liskov Substitution principle. SpringGlass was
          written with Logger in mind but we substituted it with a subtype of Logger, Example Logger,
          which logs to the DOM as well as to console.</p>
        <script>
          function SpringClass(logger) {
            this.logger = logger;
            // Some non-Singleton property setters can be defined by the instance
            this.logger.setNamespace('SpringClass');
          }
          SpringClass.prototype.doLogging = function doLogging() {
            this.logger.log('Logging from a Spring IOC container!');
          };

          var notQuiteABean = {
            springClass: {
              proto: SpringClass,
              constructorArgs: [
                {
                  ref: 'exampleLogger'
                }
              ]
            },
            exampleLogger: {
              proto: ExampleLogger,
              properties: [
                {
                  name: 'id',
                  value: 'springLog'
                }
              ]
            }
          };
          var springContext = new JsonApplicationContext(notQuiteABean);

          springClass = springContext.getBean('springClass');
        </script>
        <pre class="example">
          <code>
            function SpringClass(logger) {
              this.logger = logger;
            }
            SpringClass.prototype.doLogging = function doLogging() {
              this.logger.log('Logging from a Spring IOC container!');
              // Some non-Singleton property setters can be defined by the instance
              this.logger.setNamespace('SpringClass');
            };

            var notQuiteABean = {
              springClass: {
                proto: SpringClass,
                constructorArgs: [
                  {
                    ref: 'exampleLogger'
                  }
                ]
              },
              exampleLogger: {
                proto: ExampleLogger,
                properties: [
                  {
                    name: 'id',
                    value: 'springLog'
                  }
                ]
              }
            };
            var springContext = new JsonApplicationContext(notQuiteABean);

            springClass = springContext.getBean('springClass');
          </code>
        </pre>
        <button onclick="springClass.doLogging()">Run Example</button>
        <pre class="log"><code id="springLog"></code></pre>
      </section>
    </main>
  </body>
</html>